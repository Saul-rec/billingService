CREATE DATABASE "billingServicev2"
    WITH 
    OWNER = postgres
    ENCODING = 'UTF8'
    LC_COLLATE = 'Spanish_Latin America.1252'
    LC_CTYPE = 'Spanish_Latin America.1252'
    TABLESPACE = pg_default
    CONNECTION LIMIT = -1;

CREATE TABLE billing
(
    billing_code bigint NOT NULL,
    code_employee bigint NOT NULL,
    name_client character varying(75),
    payment_type character varying(75),
    date_of_sell date,
    total_iva double precision,
    subtotal double precision,
    total_sell double precision,
    PRIMARY KEY (billing_code)
);

CREATE TABLE billing_details
(
    billing_detail_code bigint NOT NULL,
    cod_product bigint NOT NULL,
    billing_code bigint,
    quantity integer,
    unit_price_product double precision,
    iva_per_product double precision,
    amount double precision,
    PRIMARY KEY (billing_detail_code)
);

CREATE TABLE employee
(
    code_employee bigint NOT NULL,
    name_employee character varying(75),
    lastname_employee character varying(75),
    PRIMARY KEY (code_employee)
);

CREATE TABLE products
(
    code_product bigint NOT NULL,
    desc_product character varying(100),
    name_product character varying(50) NOT NULL,
    presentation character varying(50),
    stock integer NOT NULL,
    unit_price_product double precision NOT NULL,
    PRIMARY KEY (code_product)
);

ALTER TABLE public.billing
    ADD FOREIGN KEY (code_employee)
    REFERENCES public.employee (code_employee)
    NOT VALID;


ALTER TABLE public.billing_details
    ADD FOREIGN KEY (billing_code)
    REFERENCES public.billing (billing_code)
    NOT VALID;


ALTER TABLE public.billing_details
    ADD FOREIGN KEY (cod_product)
    REFERENCES public.products (code_product)
    NOT VALID;